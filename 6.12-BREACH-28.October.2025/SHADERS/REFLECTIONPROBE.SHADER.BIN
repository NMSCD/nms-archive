[[FX]]

sampler gDiffuseMap = sampler_state
{
    TexUnit = 0;
};

sampler gNormalMap = sampler_state
{
    TexUnit = 1;
};

sampler gNormal2Map = sampler_state
{
    TexUnit = 3;
};

sampler gDiffuse2Map = sampler_state
{
    TexUnit = 4;
};

sampler gMasksMap = sampler_state
{
    TexUnit = 5;
};

sampler gFeaturesMap = sampler_state
{
    TexUnit = 6;
};

sampler gCausticMap = sampler_state
{
    TexUnit = 7;
};

sampler gCausticOffsetMap = sampler_state
{
    TexUnit = 8;
};

sampler gShadowMap = sampler_state
{
    TexUnit = 9;
};

sampler gCloudShadowMap = sampler_state
{
    TexUnit = 10;
};

sampler gDiffEnvMap = sampler_state
{
    TexUnit = 11;
};

sampler gSpecEnvMap = sampler_state
{
    TexUnit = 12;
};

sampler gNoiseMap = sampler_state
{
    DefaultTexture = SHADER/CLOUDNOISE.DDS;
    TexUnit = 16;
    Address = Wrap;
};

sampler gPerlin3D = sampler_state
{
    DefaultTexture = SHADER/NOISEHALF.DDS;
    TexUnit = 17;
    Address = Wrap;
};

sampler gFadeNoiseMap = sampler_state
{
    DefaultTexture = SHADER/BLUENOISE.DDS;
    TexUnit = 18;
    Address = Wrap;
};

sampler gDepthBuffer = sampler_state
{
    Address = Clamp;
    TexUnit = 19;
};

sampler gBufferMap = sampler_state
{
    Address = Clamp;
    TexUnit = 20;
};

uint4 gDynamicFlags = {0, 0, 0, 0};

// Planet
float4 gPlanetPositionVec4 = {0.0, -1204.0, 0.0, 1204.0};
float4 gLightOriginVec4    = {0.0, 0.0, 0.0, 0.0}; 

// Lighting
float4 gMaterialParamsVec4              = {0.9, 0.5, 0.0, 0.5};
float4 gMaterialParams2Vec4             = {0.0, 1.0, 0.0, 0.0};
float4 gMaterialSFXVec4                 = { 0.0, 0.0, 0.0, 0.0 };
float4 gMaterialSFXColVec4              = { 0.0, 0.0, 0.0, 0.0 };

// Texturing
float4 gMaterialColourVec4              = {1.0, 1.0, 1.0, 1.0};
float4 gUVScrollStepVec4                = {0.0, 0.0, 0.0, 0.0};
float4 gCustomParams01Vec4              = {0.0, 0.0, 0.0, 0.0};
float4 gCustomParams02Vec4              = {0.0, 1.0, 1.0, 0.0};
float4 gRecolourVec4                    = {0.0, 0.0, 0.0, 0.0};
float4 gAverageColourVec4               = {0.0, 0.0, 0.0, 0.0};


// Vertex Displacement
float4 gWaveOneAmpAndPosOffsetVec4		 = {0.0, 0.0, 0.0, 0.0};
float4 gWaveOneFrequencyVec4                     = {0.0, 0.0, 0.0, 0.0};
float4 gWaveOneFallOffAndSpeedVec4               = {0.0, 0.0, 0.0, 0.0};
float4 gWaveTwoAmplitudeVec4                     = {0.0, 0.0, 0.0, 0.0};
float4 gWaveTwoFrequencyVec4                     = {0.0, 0.0, 0.0, 0.0};
float4 gWaveTwoFallOffAndSpeedVec4               = {0.0, 0.0, 0.0, 0.0};

// Fog
float4 gSkyColourVec4                   = {1.0, 0.0, 1.0, 0.0};
float4 gHorizonColourVec4               = {1.0, 0.0, 1.0, 0.0};
float4 gSunColourVec4                   = {1.0, 0.0, 1.0, 0.0};
float4 gWaterFogColourNearVec4             = {1.0, 0.0, 1.0, 0.0};
float4 gWaterAlbedoVec4              = {1.0, 0.0, 1.0, 0.0};
float4 gWaterFogVec4                    = {1.0, 0.0, 1.0, 0.0};
float4 gFogColourVec4                   = {1.0, 0.0, 1.0, 0.0};
float4 gSpaceHorizonColourVec4          = {1.0, 0.0, 1.0, 0.0};
float4 gHeightFogColourVec4             = {1.0, 0.0, 1.0, 0.0};
float4 gHeightFogParamsVec4             = {1.0, 0.0, 1.0, 0.0};
float4 gFogParamsVec4                   = {1.0, 0.0, 1.0, 0.0};
float4 gScatteringParamsVec4            = {1.0, 0.0, 1.0, 0.0};
float4 gSpaceFogParamsVec4              = {1.0, 0.0, 1.0, 0.0};
float4 gSpaceSkyColourVec4              = {1.0, 0.0, 1.0, 0.0};
float4 gSunPositionVec4                 = {1.0, 0.0, 1.0, 0.0};
float4 gBiomeDataVec4                   = {0.0, 0.0, 0.0, 0.0};
float4 gSpaceScatteringParamsVec4       = {1.0, 0.0, 1.0, 0.0};
float4 gLightTopColourVec4              = {1.0, 1.0, 1.0, 1.0};
float4 gPlaneSpotPositionVec4           = {0.0, 0.0, 0.0, 0.0};

// Scan
float4 gScanParamsPosVec4               = {0.0, 0.0, 0.0, 0.0};
float4 gScanParamsCfg1Vec4              = {0.0, 0.0, 0.0, 0.0};
float4 gScanParamsCfg2Vec4              = {0.0, 0.0, 0.0, 0.0};
float4 gScanParamsCfg3Vec4              = {0.0, 0.0, 0.0, 0.0};
float4 gScanColourVec4                  = {0.0, 0.0, 0.0, 0.0};

float4 gImposterDataVec4                = {16.0, 0.0, 0.0, 0.0};
float4 gImposterQualitySettingsVec4     = {0.0 , 0.0, 0.0, 0.0};
float4 gOctahedralImposterDataVec4      = {0.0 , 0.0, 0.0, 0.0};
float4 gAlphaCutoutThresholdVec4        = {0.45, 0.5, 0.0, 0.0};

float4 gTileBlendScalesVec4             = {8.0, 0.5, 2.0, 2.0};
float4 gImposterDebug                   = {0.0, 0.0, 1.0, 0.0};

// ONLY FOR NMS (see F_OBJECTS_MATCH_GROUND_COLOUR() )
float4 gTerrainColour1Vec4;
float4 gTerrainColour2Vec4;

// ONLY FOR EVEREST (see F_OBJECTS_MATCH_GROUND_COLOUR() )
float4 gTerrainColourControlsVec4  = { 0.0, 0.0, 0.0, 0.0 };
float4 gTerrainColourControls2Vec4 = { 0.0, 0.0, 0.0, 0.0 };
float4 gaTerrainColours0Vec4;
float4 gaTerrainColours1Vec4;
float4 gaTerrainColours2Vec4;
float4 gTerrainIndexVec4                = { 0.0, 0.0, 0.0, 0.0 };

float4 gUserDataVec4                    = { 0.0, 0.0, 0.0, 0.0 };

// Reactivity
float4 gReactivityParamsVec4            = { 0.0, 0.0, 0.0, 0.0 };

uint4 gLightLayers                      = { 0, 0, 0, 0 };

// Dissolve
float4 gDissolveDataVec4                = { 0.0, 0.0, 0.0, 0.0 };
float4 gParallaxMapDataVec4             = { 0.0, 0.0, 0.0, 0.0 };
float4 gRefractionParamsVec4            = { 0.0, 0.0, 0.0, 0.0 };

float4 gTextureColourParamsVec4         = { 0.0, 0.0, 0.0, 0.0 };
float4 gTextureColourParams2Vec4        = { 0.0, 0.0, 0.0, 0.0 };

float4 gWindDirParamsVec4               = { 0.0, 0.0, 0.0, 0.0 }; // xyz = Wind DIr, w = Tree Swing Frequency
float4 gWindTreeFreqVec4                = { 0.0, 0.0, 0.0, 0.0 }; // x= Leaf frequency, y = Branch swing V Swing, z = Branch swing H Swing 
float4 gTreeWindParams0Vec4             = { 0.0, 0.0, 0.0, 0.0 }; // x = Branch Vertical Swing, y = Branch Horizontal Swing, z = Branch animation around trunk, w = Height Scale
float4 gTreeWindParams1Vec4             = { 0.0, 0.0, 0.0, 0.0 }; // x = Trunk Bend, y = Leaf Noise, z = Leaf Swing
float4 gPrevWindDirParamsVec4           = { 0.0, 0.0, 0.0, 0.0 }; 
float4 gPrevWindTreeFreqVec4            = { 0.0, 0.0, 0.0, 0.0 }; 

float4 gTopBlendParamsVec4              = { 0.0, 0.0, 0.0, 0.0 }; // x = Top Blend Amount, y = Top Blend Offset, z = Top Blend Sharpness, w = Top Blend Flip (Bottom Blend)

//TF_BEGIN
float4 gHDRParamsVec4					= { 0.0, 0.0, 0.0, 0.0 };
float4 gDoFParamsVec4					= { 0.0, 0.0, 0.0, 0.0 };
float4 gRainParametersVec4				= { 0.0, 0.0, 0.0, 0.0 };

// probes
float4 gaProbePositionsVec4;
float4 gaProbeExtentsVec4;
float4 gaProbeMat4;
//TF_END


context PROBE_VIZ
{
    VertexShader = compile GLSL VS_PROBE_VISUALISE;
    PixelShader  = compile GLSL FS_PROBE_VISUALISE;
}

[[VS_PROBE_VISUALISE]]
// =================================================================================================
#define D_DEFER
#define D_OUTPUT_MOTION_VECTORS
#define D_PROBE_VISUALISE
#include "UberVertex.shader.h"

[[FS_PROBE_VISUALISE]]
// =================================================================================================
#define D_DEFER
#define D_ATTRIBUTES
#define D_OUTPUT_MOTION_VECTORS
#define D_PROBE_VISUALISE
#include "UberFragment.shader.h"